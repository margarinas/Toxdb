tinymce.ThemeManager.add("modern",function(e){function t(){function t(t){var r,i=[];if(t)return c(t.split(/[ ,]/),function(t){function n(){var n=e.selection;"bullist"==s&&n.selectorChanged("ul > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active("UL"==r)}),"numlist"==s&&n.selectorChanged("ol > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active("OL"==r)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var s;"|"==t?r=null:l.has(t)?(t={type:t},f.toolbar_items_size&&(t.size=f.toolbar_items_size),i.push(t),r=null):(r||(r={type:"buttongroup",items:[]},i.push(r)),e.buttons[t]&&(s=t,t=e.buttons[s],t.type=t.type||"button",f.toolbar_items_size&&(t.size=f.toolbar_items_size),t=l.create(t),r.items.push(t),e.initialized?n():e.on("init",n)))}),n.push({type:"toolbar",layout:"flow",items:i}),!0}for(var n=[],r=1;10>r&&t(f["toolbar"+r]);r++);return n.length||t(f.toolbar||d),n}function n(){function t(t){var n;return"|"==t?{text:"|"}:n=e.menuItems[t]}function n(n){var r,i,s,o,u;if(u=tinymce.makeMap((f.removed_menuitems||"").split(/[ ,]/)),f.menu?(i=f.menu[n],o=!0):i=p[n],i){r={text:i.title},s=[],c((i.items||"").split(/[ ,]/),function(e){var n=t(e);n&&!u[e]&&s.push(t(e))}),o||c(e.menuItems,function(e){e.context==n&&("before"==e.separator&&s.push({text:"|"}),e.prependToContext?s.unshift(e):s.push(e),"after"==e.separator&&s.push({text:"|"}))});for(var a=0;a<s.length;a++)"|"==s[a].text&&(0===a||a==s.length-1)&&s.splice(a,1);if(r.menu=s,!r.menu.length)return null}return r}var r,i=[],s=[];if(f.menu)for(r in f.menu)s.push(r);else for(r in p)s.push(r);for(var o=f.menubar?f.menubar.split(/[ ,]/):s,u=0;u<o.length;u++){var a=o[u];a=n(a),a&&i.push(a)}return i}function r(t){function n(e){var n=t.find(e)[0];n&&n.focus()}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function i(t,n){function r(e){return{width:e.clientWidth,height:e.clientHeight}}var i,s,o,u;i=e.getContainer(),s=e.getContentAreaContainer().firstChild,o=r(i),u=r(s),t=Math.max(f.min_width||100,t),n=Math.max(f.min_height||100,n),t=Math.min(f.max_width||65535,t),n=Math.min(f.max_height||65535,n),h.css(i,"width",t+(o.width-u.width)),h.css(s,"width",t),h.css(s,"height",n),e.fire("ResizeEditor")}function s(t,n){var r=e.getContentAreaContainer();a.resizeTo(r.clientWidth+t,r.clientHeight+n)}function o(){function i(){c&&c.moveRel&&c.visible()&&!c._fixed&&c.moveRel(e.getBody(),["tl-bl","bl-tl"])}function s(){c&&(c.show(),i(),h.addClass(e.getBody(),"mce-edit-focus"))}function o(){c&&(c.hide(),h.removeClass(e.getBody(),"mce-edit-focus"))}function u(){return c?(c.visible()||s(),void 0):(c=a.panel=l.create({type:p?"panel":"floatpanel",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",autohide:!1,autofix:!0,fixed:!!p,border:1,items:[f.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},f.toolbar===!1?null:{type:"panel",name:"toolbar",layout:"stack",items:t()}]}),c.renderTo(p||document.body).reflow(),r(c),s(),e.on("nodeChange",i),e.on("activate",s),e.on("deactivate",o),void 0)}var c,p;return f.fixed_toolbar_container&&(p=h.select(f.fixed_toolbar_container)[0]),f.content_editable=!0,e.on("focus",u),e.on("blur",o),e.on("remove",function(){c&&(c.remove(),c=null)}),{}}function u(s){var o,u,c;return o=a.panel=l.create({type:"panel",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[f.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},f.toolbar===!1?null:{type:"panel",layout:"stack",items:t()},{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),f.resize!==!1&&(u={type:"resizehandle",direction:f.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;c={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){i(c.width+e.deltaX,c.height+e.deltaY)}}),f.statusbar!==!1&&o.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",items:[{type:"elementpath"},u]}),o.renderBefore(s.targetNode).reflow(),f.width&&tinymce.DOM.setStyle(o.getEl(),"width",f.width),e.on("remove",function(){o.remove(),o=null}),r(o),{iframeContainer:o.find("#iframe")[0].getEl(),editorContainer:o.getEl()}}var a=this,f=e.settings,l=tinymce.ui.Factory,c=tinymce.each,h=tinymce.DOM,p={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},d="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";a.renderUI=function(t){var n=f.skin!==!1?f.skin||"lightgray":!1;return n&&(tinymce.Env.documentMode<=7?tinymce.DOM.loadCSS(tinymce.baseURL+"/skins/"+n+"/skin.ie7.min.css"):tinymce.DOM.loadCSS(tinymce.baseURL+"/skins/"+n+"/skin.min.css"),e.contentCSS.push(tinymce.baseURL+"/skins/"+n+"/content"+(e.inline?".inline":"")+".min.css")),e.on("ProgressState",function(e){a.throbber=a.throbber||new tinymce.ui.Throbber(a.panel.getEl("body")),e.state?a.throbber.show(e.time):a.throbber.hide()}),f.inline?o(t):u(t)},a.resizeTo=i,a.resizeBy=s});