!function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var n=i(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinymce.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function r(e){var n,r=this;if(null!=e)t.call(r),r.each(function(t,n){var r;(r=tinymce.get(n.id))&&r.setContent(e)});else if(r.length>0&&(n=tinymce.get(r[0].id)))return n.getContent()}function i(e){var t=null;return e&&e.id&&s.tinymce&&(t=tinymce.get(e.id)),t}function o(e){return!!(e&&e.length&&s.tinymce&&e.is(":tinymce"))}var u={};e.each(["text","html","val"],function(t,s){var a=u[s]=e.fn[s],f="text"===s;e.fn[s]=function(t){var s=this;if(!o(s))return a.apply(s,arguments);if(t!==n)return r.call(s.filter(":tinymce"),t),a.apply(s.not(":tinymce"),arguments),s;var u="",l=arguments;return(f?s:s.eq(0)).each(function(t,n){var r=i(n);u+=r?f?r.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):r.getContent({save:!0}):a.apply(e(n),l)}),u}}),e.each(["append","prepend"],function(t,r){var s=u[r]=e.fn[r],a="prepend"===r;e.fn[r]=function(e){var t=this;return o(t)?e!==n?(t.filter(":tinymce").each(function(t,n){var r=i(n);r&&r.setContent(a?e+r.getContent():r.getContent()+e)}),s.apply(t.not(":tinymce"),arguments),t):void 0:s.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(n,r){var i=u[r]=e.fn[r];e.fn[r]=function(){return t.call(this,r),i.apply(this,arguments)}}),u.attr=e.fn.attr,e.fn.attr=function(t,s){var a=this,f=arguments;if(!t||"value"!==t||!o(a))return s!==n?u.attr.apply(a,f):u.attr.apply(a,f);if(s!==n)return r.call(a.filter(":tinymce"),s),u.attr.apply(a.not(":tinymce"),f),a;var l=a[0],h=i(l);return h?h.getContent({save:!0}):u.attr.apply(e(l),f)}}var n,r,i=[],s=window;e.fn.tinymce=function(n){function o(){var r=[],i=0;t&&(t(),t=null),c.each(function(e,t){var s,o=t.id,u=n.oninit;o||(t.id=o=tinymce.DOM.uniqueId()),tinymce.get(o)||(s=new tinymce.Editor(o,n,tinymce.EditorManager),r.push(s),s.on("init",function(){var e,t=u;c.css("visibility",""),u&&++i==r.length&&("string"==typeof t&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,r))}))}),e.each(r,function(e,t){t.render()})}var u,f,l,c=this,h="";if(!c.length)return c;if(!n)return tinymce.get(c[0].id);if(c.css("visibility","hidden"),s.tinymce||r||!(u=n.script_url))1===r?i.push(o):o();else{r=1,f=u.substring(0,u.lastIndexOf("/")),-1!=u.indexOf(".min")&&(h=".min"),s.tinymce=s.tinyMCEPreInit||{base:f,suffix:h},-1!=u.indexOf("gzip")&&(l=n.language||"en",u=u+(/\?/.test(u)?"&":"?")+"js=true&core=true&suffix="+escape(h)+"&themes="+escape(n.theme)+"&plugins="+escape(n.plugins)+"&languages="+l,s.tinyMCE_GZ||(s.tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(e))}t("langs/"+l+".js"),t("themes/"+n.theme+"/theme"+h+".js"),t("themes/"+n.theme+"/langs/"+l+".js"),e.each(n.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+h+".js"),t("plugins/"+n+"/langs/"+l+".js"))})},end:function(){}}));var p=document.createElement("script");p.type="text/javascript",p.onload=p.onreadystatechange=function(t){t=t||event,("load"==t.type||/complete|loaded/.test(p.readyState))&&(tinymce.dom.Event.domLoaded=1,r=2,n.script_loaded&&n.script_loaded(),o(),e.each(i,function(e,t){t()}))},p.src=u,document.body.appendChild(p)}return c},e.extend(e.expr[":"],{tinymce:function(e){return!!(e.id&&"tinymce"in window&&tinymce.get(e.id))}})}(jQuery);