define(["jquery"],function(e){var t=function(t,n){defaults={content:"",show:!1,id:"modal",title:"01",footer:"",data:null,onHide:null},typeof t=="string"&&(t={getUrl:t});var r=e.extend(defaults,t);e(".modal").attr("id",r.id),e(".modal-header h3").text(r.title),e(".modal-footer").html(r.footer),r.show&&e(".modal").modal({show:!0,backdrop:"static"}),r.getUrl?(e("#busy-indicator").fadeIn(),e(".modal-body").load(baseUrl+r.getUrl,r.data,function(t){e("#busy-indicator").fadeOut(),n(t)})):(r.content&&e(".modal-body").append(r.content),n()),e(".modal").on("hidden",function(t){e(t.target).hasClass("modal")&&(typeof tinyMCE!="undefined"&&e(".modal-body textarea").each(function(e){tinyMCE.execCommand("mceRemoveEditor",!1,this.id)}),console.log(this),e(this).find(".modal-body").empty(),e(this).find(".attach_substance").addClass("disabled"),typeof r.onHide=="function"&&r.onHide())})};return{set:t}});